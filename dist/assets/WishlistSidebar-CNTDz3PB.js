import{c as V,r as l,R as f,a as G,j as a}from"./index-85IIvyDu.js";import{g as q,d as K,b as Z,a as j,A as F,c as H,e as k}from"./AuthModal-Brs5OU3Q.js";var Y=V();/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Q=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,s)=>s?s.toUpperCase():r.toLowerCase()),I=e=>{const t=Q(e);return t.charAt(0).toUpperCase()+t.slice(1)},W=(...e)=>e.filter((t,r,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===r).join(" ").trim(),X=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ee={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=l.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:o="",children:n,iconNode:h,...m},c)=>l.createElement("svg",{ref:c,...ee,width:t,height:t,stroke:e,strokeWidth:s?Number(r)*24/Number(t):r,className:W("lucide",o),...!n&&!X(m)&&{"aria-hidden":"true"},...m},[...h.map(([C,g])=>l.createElement(C,g)),...Array.isArray(n)?n:[n]]));/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=(e,t)=>{const r=l.forwardRef(({className:s,...o},n)=>l.createElement(te,{ref:n,iconNode:t,className:W(`lucide-${J(I(e))}`,`lucide-${e}`,s),...o}));return r.displayName=I(e),r};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],ae=re("message-circle",se);var A={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},E=f.createContext&&f.createContext(A),ie=["attr","size","title"];function oe(e,t){if(e==null)return{};var r=ne(e,t),s,o;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(o=0;o<n.length;o++)s=n[o],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function ne(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},N.apply(this,arguments)}function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,s)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D(Object(r),!0).forEach(function(s){le(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function le(e,t,r){return t=ce(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ce(e){var t=de(e,"string");return typeof t=="symbol"?t:t+""}function de(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function L(e){return e&&e.map((t,r)=>f.createElement(t.tag,O({key:r},t.attr),L(t.child)))}function ue(e){return t=>f.createElement(he,N({attr:O({},e.attr)},t),L(e.child))}function he(e){var t=r=>{var{attr:s,size:o,title:n}=e,h=oe(e,ie),m=o||r.size||"1em",c;return r.className&&(c=r.className),e.className&&(c=(c?c+" ":"")+e.className),f.createElement("svg",N({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,s,h,{className:c,style:O(O({color:e.color||r.color},r.style),e.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),n&&f.createElement("title",null,n),e.children)};return E!==void 0?f.createElement(E.Consumer,null,r=>t(r)):t(A)}function me(e){return ue({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C148.5 48 60.1 129.5 49.2 234.1c-.8 7.2-1.2 14.5-1.2 21.9 0 7.4.4 14.7 1.2 21.9C60.1 382.5 148.5 464 256 464c114.9 0 208-93.1 208-208S370.9 48 256 48zm135.8 326.1c-22.7-8.6-59.5-21.2-82.4-28-2.4-.7-2.7-.9-2.7-10.7 0-8.1 3.3-16.3 6.6-23.3 3.6-7.5 7.7-20.2 9.2-31.6 4.2-4.9 10-14.5 13.6-32.9 3.2-16.2 1.7-22.1-.4-27.6-.2-.6-.5-1.2-.6-1.7-.8-3.8.3-23.5 3.1-38.8 1.9-10.5-.5-32.8-14.9-51.3-9.1-11.7-26.6-26-58.5-28h-17.5c-31.4 2-48.8 16.3-58 28-14.5 18.5-16.9 40.8-15 51.3 2.8 15.3 3.9 35 3.1 38.8-.2.7-.4 1.2-.6 1.8-2.1 5.5-3.7 11.4-.4 27.6 3.7 18.4 9.4 28 13.6 32.9 1.5 11.4 5.7 24 9.2 31.6 2.6 5.5 3.8 13 3.8 23.6 0 9.9-.4 10-2.6 10.7-23.7 7-58.9 19.4-80 27.8C91.6 341.4 76 299.9 76 256c0-48.1 18.7-93.3 52.7-127.3S207.9 76 256 76c48.1 0 93.3 18.7 127.3 52.7S436 207.9 436 256c0 43.9-15.6 85.4-44.2 118.1z"},child:[]}]})(e)}const xe=async e=>{try{return await Z("/api/postWishlistData",e)}catch(t){throw console.error("Wishlist Service Error (POST):",t),t}},R=async e=>{try{return await q(`/api/getWishlistData?visitorId=${e}`)}catch(t){throw console.error("Wishlist Service Error (GET):",t),t}},ge=async e=>await K("/api/deleteWishlistData",e),be=({visitorId:e,onLoginRequired:t,onLogout:r})=>{const[s,o]=l.useState(!1),[n,h]=l.useState([]),[m,c]=l.useState([]),[C,g]=l.useState(!1),[p,w]=l.useState(null),[b,P]=l.useState(e||j.get("visitorId")),[$,v]=l.useState(!1),z=G();l.useEffect(()=>{s&&(async()=>{const d=j.get("visitorId");if(P(d),d)try{const u=await H(d);u.success&&w(u.data);const x=await R(d);h(x.data||[]);const y=await k(d);c(y.data||[]),g(y.data?.some(T=>!T.isRead))}catch(u){console.error(u)}else w(null),h([]),c([]),g(!1)})()},[s]);const U=()=>{j.remove("visitorId"),w(null),h([]),c([]),P(null),r?.()},S=()=>{b||(v(!0),o(!1),t?.())},_=i=>{b?z(`/office/${i._id}?category=${i.type}`,{state:{relatedProperties:n,city:i.location?.city}}):S()},B=async i=>{const d=i.visitorId||j.get("visitorId");P(d),w(i),v(!1),o(!0);try{const u=await R(d);h(u.data||[]);const x=await k(d);c(x.data||[]),g(x.data?.some(y=>!y.isRead))}catch(u){console.error(u)}},M=a.jsxs("div",{className:`fixed inset-0 z-[9999] flex transition-opacity duration-100 ${s?"opacity-100 visible":"opacity-0 invisible"}`,children:[a.jsx("div",{className:"flex-1",onClick:()=>o(!1)}),a.jsxs("div",{className:`w-80 backdrop-blur-md bg-black/40 text-white shadow-2xl border-l border-gray-700 rounded-l-2xl p-5 overflow-y-auto transform transition-transform duration-300 ease-in-out ${s?"translate-x-0":"translate-x-full"}`,children:[a.jsx("div",{className:"flex items-right justify-between mb-3",children:a.jsx("button",{onClick:()=>o(!1),className:"text-md text-gray-300 hover:text-white transition",children:"✕"})}),b&&p?a.jsxs("div",{className:"flex flex-col items-center w-full mb-6 h-40",children:[" ",a.jsxs("div",{className:"relative w-14 h-14 flex-shrink-0 mb-2",children:[" ",a.jsx("div",{className:"w-full h-full rounded-full bg-blue-500 flex items-center justify-center text-white font-bold text-lg shadow-md",children:p.fullName?.[0]||"V"}),p.verified&&a.jsx("span",{className:"absolute bottom-0 right-0 w-4 h-4 bg-green-500 border-2 border-white rounded-full flex items-center justify-center text-white text-[10px] font-bold",children:"✓"})]}),a.jsxs("div",{className:"text-center w-full",children:[a.jsx("p",{className:"font-semibold text-white-400 text-base truncate",children:p.fullName}),a.jsx("p",{className:"text-xs text-white-900 truncate",children:p.email}),a.jsx("p",{className:"text-xs text-white-900",children:p.mobile})]}),a.jsx("button",{onClick:U,className:"mt-3 w-full bg-gradient-to-r from-pink-500 via-red-500 to-red-600 px-3 py-1.5 rounded-lg text-sm font-semibold text-white shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-200",children:"Logout"})]}):a.jsx("div",{className:"mb-6 flex justify-center w-full",children:a.jsx("button",{onClick:S,className:"px-4 py-2 bg-gradient-to-r from-blue-500 via-indigo-600 to-purple-600 rounded-xl text-sm font-medium text-white shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-200",children:"Login / Register"})}),b&&m.length>0&&a.jsxs("div",{className:"mb-8",children:[a.jsx("h3",{className:"text-sm uppercase font-semibold text-white tracking-wider mb-3",children:"Notifications"}),a.jsx("div",{className:"h-[200px] overflow-y-auto space-y-3 pr-1 custom-scrollbar",children:m.map(i=>{const d=i.createdAt?new Date(i.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",u=!i.isRead,x=i.message?.replace(/^You have a new message from .*?:\s*/,"")?.replace(/^"|"$/g,"")?.trim();return a.jsxs("div",{className:`
              flex flex-col gap-1 p-3 bg-black/20 backdrop-blur-md rounded-xl cursor-pointer
              border border-white/20 shadow-md
              ${u?"shadow-[0_0_10px_rgba(72,187,120,0.6)]":"shadow-[0_0_6px_rgba(255,255,255,0.1)]"}
              hover:shadow-[0_0_12px_rgba(72,187,120,0.8)] transition-all duration-200
            `,children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(ae,{className:"w-5 h-5 mt-0.5 text-white/80"}),a.jsx("p",{className:"text-sm flex-1 text-white font-medium leading-snug",children:x})]}),d&&a.jsx("span",{className:"ml-8 text-xs text-white/60",children:d})]},i._id)})})]}),b&&a.jsxs("div",{className:"mt-6",children:[a.jsx("h3",{className:"text-sm uppercase font-semibold text-white/80 tracking-wider mb-4",children:"Saved Spaces"}),n.length===0?a.jsx("p",{className:"text-white/70 text-sm italic",children:"No saved spaces yet."}):a.jsx("div",{className:"h-[300px] overflow-y-auto pr-1 space-y-3 custom-scrollbar",children:n.map(i=>i?.property&&a.jsxs("div",{onClick:()=>_(i.property),className:`flex items-center gap-3 p-3 bg-white rounded-xl backdrop-blur-sm cursor-pointer
                  border border-white/20 shadow-md
                  hover:shadow-lg transition-all duration-200`,children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("img",{src:i.property.images?.[0]||"/placeholder.png",alt:i.property.buildingName,className:"w-16 h-16 rounded-lg object-cover border border-gray-300"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 leading-snug",children:i.property.buildingName}),a.jsxs("p",{className:"text-xs text-gray-600 mb-1",children:[i.property.location?.city,","," ",i.property.location?.locationOfProperty]}),a.jsx("button",{onClick:()=>_(i.property),className:`px-3 py-1 text-[11px] bg-gradient-to-r from-green-500/80 to-teal-500/80 
                      text-black font-medium rounded-full shadow-md hover:shadow-lg 
                      transition-all duration-200 backdrop-blur-sm`,children:"View Details →"})]})]},i._id))})]})]}),a.jsx(F,{isOpen:$,onClose:()=>v(!1),onAuthSuccess:B})]});return a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>{o(!0),v(!1)},className:"relative p-2 bg-gradient-to-tr from-slate-700 to-gray-800 rounded-full hover:from-blue-600 hover:to-indigo-600 shadow-md transition",children:[a.jsx(me,{className:"w-6 h-6 text-white"}),C&&a.jsx("span",{className:"absolute w-2 h-2 bg-green-400 rounded-full top-1 right-1"})]}),Y.createPortal(M,document.body)]})};export{ue as G,be as W,re as c,ge as d,R as g,xe as p};
